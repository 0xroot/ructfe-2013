#! /usr/bin/a+ -q

strip{s;l}: {
  (~sÅl)/s
}

r n: {
 xûnÒ' ';
 sys.read{0;x;n};
 strip{x;"\n"}
}

fget: {
 nameûr 32;
 strip{name;" "};
 nameûhash{name};
 read{name}
}

fput: {
  nameûr 32;
  valûr 32;
  strip{name;" "};
  strip{val;" "};
  sys.chdir{"files"};
  nameûhash{name};
  write{name;val}
}

list: {
  sys.agetdents "files"
}

hash str: {
 str
}

write{file;data}:{
     if (0<fdûsys.open{file;
                       `O_CREAT`O_EXCL`O_WRONLY;
                       8Â6 4 4})
        {
        sys.write{fd;data;#data};
        sys.close{fd};
        };
     }

read{file}: {
 sys.chdir{"files"};
 sys.readmat file
}
  
âr{4}

sys.exit 0